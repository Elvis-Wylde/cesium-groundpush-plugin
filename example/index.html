<!DOCTYPE html>
<html>
<head>
<title>Cesium Ground-push Demo</title>
    <link rel="stylesheet" href="../lib/cesium-b26/Widgets/widgets.css">
    <link rel="stylesheet" href="./example.css">
    <script type="text/javascript" src="../lib/cesium-b27/Cesium.js"></script>
    <script type="text/javascript" src="../GroundPushCentralBodySurfaceShaderSet.js"></script>
    <script type="text/javascript" src="../GroundPushCentralBodyVS.js"></script>
    <script type="text/javascript" src="../GroundPushCentralBodyFS.js"></script>
    <script type="text/javascript" src="../GroundPush.js"></script>
</head>
<body>
<div id="cesiumContainer" class="fullWindow"></div>
<script type="text/javascript">
    var lat = -33.86; // Sydney
    var lon = 151.21;
    var width = 1.0;

    var pushExtent = new Cesium.Extent(
        Cesium.Math.toRadians(lon - width),
        Cesium.Math.toRadians(lat - width),
        Cesium.Math.toRadians(lon + width),
        Cesium.Math.toRadians(lat + width)
    );

    var pushDepth = -50000;

    options = {
        pushExtent : pushExtent,
        pushDepth : pushDepth,
        pushSidesTint : new Cesium.Cartesian3(0.7, 0.6, 0.5)
    };

    // Initialise the ground push.
    var gp = new GroundPush(Cesium, options);

    var cesiumWidget = new Cesium.CesiumWidget('cesiumContainer');
    var centralBody = cesiumWidget.centralBody;

    // Set the camera to view the push extent.
    cesiumWidget.scene.camera.viewExtent(pushExtent);

    // Add an imagery provider to show in the pushed region
    var imageryLayers = centralBody.imageryLayers;
    var imageryProvider = new Cesium.TileMapServiceImageryProvider({
        url : '//cesium.agi.com/blackmarble',
        maximumLevel : 8,
        credit : 'Black Marble imagery courtesy NASA Earth Observatory',

        // Limit the extent of the imagery layer so that tiles
        // that will never be visible aren't loaded.
        extent : gp.getOuterExtent()
    });
    imageryLayers.addImageryProvider(imageryProvider);

    // Set this property to limit the ImageryLayer to the push region.
    imageryLayers.get(1).showOnlyInPushedRegion = true;
</script>

</body>
</html>